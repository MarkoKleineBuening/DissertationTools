<SourceFile>
  <Line number="1">#include &quot;bmi160_defs.h&quot;</Line>
  <Line number="2">#include &lt;stdint.h&gt;</Line>
  <Line number="3"></Line>
  <Line number="4">#ifndef STUB_FIFO_SIZE_BYTES</Line>
  <Line number="5">#error &quot;STUB_FIFO_SIZE_BYTES (the size of the stubbed FIFO passed to the driver) must be defined.&quot;</Line>
  <Line number="6">#endif</Line>
  <Line number="7"></Line>
  <Line number="8">uint8_t __llbmc_nondef_uint8_t(void);</Line>
  <Line number="9">uint16_t __llbmc_nondef_uint16_t(void);</Line>
  <Line number="10">int8_t __llbmc_nondef_int8_t(void);</Line>
  <Line number="11">void __llbmc_assume(int);</Line>
  <Line number="12"></Line>
  <Line number="13">// The &quot;main&quot; configuration stub</Line>
  <Line number="14">struct bmi160_dev configStub;</Line>
  <Line number="15"></Line>
  <Line number="16">// The FIFO buffer stub (configStub has a pointer to this structure)</Line>
  <Line number="17">uint8_t fifoDataStub[STUB_FIFO_SIZE_BYTES];</Line>
  <Line number="18">struct bmi160_fifo_frame fifoFrameStub;</Line>
  <Line number="19"></Line>
  <Line number="20">void stubDelay(uint32_t unused) {</Line>
  <Line number="21">}</Line>
  <Line number="22"></Line>
  <Line number="23">int8_t stubRead(uint8_t unused1, uint8_t unused2, uint8_t* data, uint16_t len) {</Line>
  <Line number="24">  unsigned int i = <CheckRefs ids="2">0</CheckRefs>;</Line>
  <Line number="25">  for(; i &lt; <CheckRefs ids="3">len</CheckRefs>; <CheckRefs ids="4">++</CheckRefs>i) {</Line>
  <Line number="26">    data[i] = __llbmc_nondef_uint8_t();</Line>
  <Line number="27">  }</Line>
  <Line number="28">  int8_t x = __llbmc_nondef_int8_t();</Line>
  <Line number="29">  __llbmc_assume(<CheckRefs ids="5">x</CheckRefs> == 0 || <CheckRefs ids="6">x</CheckRefs> == <CheckRefs ids="7">-</CheckRefs>2);</Line>
  <Line number="30">  return x;</Line>
  <Line number="31">}</Line>
  <Line number="32"></Line>
  <Line number="33">int8_t stubWrite(uint8_t unused1, uint8_t unused2, uint8_t* unused3, uint16_t unused4) {</Line>
  <Line number="34">  return __llbmc_nondef_int8_t();</Line>
  <Line number="35">}</Line>
  <Line number="36"></Line>
  <Line number="37">void initStubs(void) {</Line>
  <Line number="38">  // Fields not set here are treated as nondef in LLBMC, which is sound</Line>
  <Line number="39"></Line>
  <Line number="40">  configStub.fifo = &amp;fifoFrameStub;</Line>
  <Line number="41">  configStub.fifo-&gt;data = fifoDataStub;</Line>
  <Line number="42">  configStub.fifo-&gt;length = <CheckRefs ids="8">STUB_FIFO_SIZE_BYTES</CheckRefs>;</Line>
  <Line number="43"></Line>
  <Line number="44">  configStub.read = stubRead;</Line>
  <Line number="45">  configStub.write = stubWrite;</Line>
  <Line number="46">  configStub.delay_ms = stubDelay;</Line>
  <Line number="47">}</Line>
</SourceFile>
